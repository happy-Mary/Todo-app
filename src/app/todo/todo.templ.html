<section>
    <ul class = 'todo'>
        <li ng-repeat='task in $ctrl.todo | filter: {"listId": $ctrl.parentId}   track by $index' ng-if="!task.completed">
          <label class="completed"><input type="checkbox" ng-model='task.completed'></label>
            <a href='#'>{{task.title}}</a>
            <label ng-class="{true: 'active', false: ''}[task.marked]" class="marked">
                <input type="checkbox" ng-model='task.marked'  ng-change='$ctrl.changeMarked()'>
            </label>
        </li>
    </ul>
    <div class="marked-view"  ng-if="$ctrl.parentId==='marked'"  ng-repeat='list in $ctrl.lists'>
        <h3><a ui-sref='lists.todo({listid: list.id})' ng-show='filtered.length > 0'>{{list.title}}</a></h3>
        <ul class = 'todo'>
            <li ng-repeat='task in filtered = ($ctrl.todo | filter: {"marked": true} | filter: {"listId": list.id})'>
                <p>{{task.length}}</p>
                <label class="completed"><input type="checkbox" ng-model='task.completed'></label>
                <a href='#'>{{task.title}}</a>
                <label ng-class="{true: 'active', false: ''}[task.marked]" class="marked">
                    <input type="checkbox" ng-model='task.marked' ng-change='$ctrl.changeMarked()'>
                </label>
            </li>
        </ul>
    </div>
</section>
