<section>
    <ul class='todo'>
        <li ng-repeat='task in $ctrl.todo track by $index' ng-if="!task.completed"  ui-sref-active='active-todo'
        dragdrop-dir drag-obj='task' verify-drag-allowed='$ctrl.verifyDragTask(obj)' ng-right-click="$ctrl.openContextMenu($event, task)">

            <label class="completed"><input type="checkbox" ng-model='task.completed' ng-change='$ctrl.changeTodo(task)'></label>
            <label ng-class="{true: 'active', false: ''}[task.marked]" class="marked">
                <input type="checkbox" ng-model='task.marked' ng-change='$ctrl.changeTodo(task)'>
            </label>
            <!-- UI_SREF FOR SIDEBAR -->
            <a ui-sref='lists.todo({todoid: task.id})'>{{task.title}}</a>
        </li>
        <button class="completed-btn" ng-click="$ctrl.completedShown = !$ctrl.completedShown" ng-if="$ctrl.parentId !== 'marked'">
            show copmleted tasks
        </button>
    </ul>
    <!-- completed tasks -->
    <div class='todo-completed' ng-if="$ctrl.completedShown">
        <h3>Completed tasks:</h3>
        <ul class='todo'>
            <li ng-repeat='task in $ctrl.todo track by $index' ng-if="task.completed"  ui-sref-active='active-todo' ng-right-click="$ctrl.openContextMenu($event, task)">
                <label class="completed active">
                    <input type="checkbox" ng-model='task.completed'  ng-change='$ctrl.changeTodo(task)'>
                </label>
                 <label ng-class="{true: 'active', false: ''}[task.marked]" class="marked">
                    <input type="checkbox" ng-model='task.marked'  ng-change='$ctrl.changeTodo(task)'>
                </label>
                <a ui-sref='lists.todo({todoid: task.id})'>{{task.title}}</a>
            </li>
        </ul>
    </div>
</section>


